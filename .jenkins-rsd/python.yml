- job:
    name: python-heme
    description: |
        Install python stuff to a virtualenv and runs unit-tests.
    disabled: false
    node: Legion

    builders:
        - heme-python-setup
        - shell: |
            . $WORKSPACE/build/SetupEnv.sh

            cd $WORKSPACE/Tools/setuptool
            rm -rf build
            python setup.py build
            python setup.py install

        - shell: |
            # Not clear how to run those...
            # . $WORKSPACE/build/SetupEnv.sh

            # for package in hemeTools HemeLBSetupTool ; do
            #    dirname=$(python -c "import $package; print($package.__file__)")
            #    dirname=$(dirname $dirname)
            #    python -m pytest --junitxml=$WORKSPACE/${package}Tests.xml $dirname || true
            # done

    publishers:
        - junit:
            results: "*Tests.xml"
